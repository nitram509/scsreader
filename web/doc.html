<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
            "http://www.w3.org/TR/html4/loose.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=utf-8"><title>SCS Reader Documentation</title><link href="style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"><meta name="description" content="SCS Reader is an OSGI compatible Java library which is able to read, parse and transform SCS (SNA Character String) data streams. The implementation also offers some converters to transform such streams into Text, PDF, RTF or other formats. At the current state it supports all features of the SCS 5256 printer standard."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="article" title="SCS Reader Documentation"><div class="titlepage"><div><div><h2 class="title"><a name="net.scs.reader.doc"></a>SCS Reader Documentation</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Martin W.</span> <span class="surname">Kirst</span></h3></div></div><div><p class="releaseinfo">Documentation for <a class="ulink" href="http://scsreader.sourceforge.net/" target="_top">SCS Reader</a> project.</p></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>
			SCS Reader is an <abbr class="abbrev">OSGI</abbr> compatible Java library which is able to read,
			parse and transform <abbr class="abbrev">SCS</abbr> (<abbr class="abbrev">SNA</abbr> Character String) data streams.
			The implementation also offers some converters to transform such
			streams into Text, <abbr class="abbrev">PDF</abbr>, <abbr class="abbrev">RTF</abbr> or other formats. At the current state
			it supports all features of the <abbr class="abbrev">SCS</abbr> 5256 printer standard.
		</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#sect.usage">Usage</a></span></dt><dd><dl><dt><span class="sect2"><a href="#sect.exampletext">Example Text-Printer</a></span></dt><dt><span class="sect2"><a href="#sect.examplepdf">Example <abbr class="abbrev">PDF</abbr>-Printer</a></span></dt></dl></dd><dt><span class="sect1"><a href="#sect.development">Development</a></span></dt><dd><dl><dt><span class="sect2"><a href="#sect.projectsetup">Project setup</a></span></dt></dl></dd></dl></div><div class="sect1" title="Usage"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect.usage"></a>Usage</h2></div></div></div><p>
			This project is designed to be an easy drop in replacement for 
			projects with existing PDF view or export functionality.
			The implementation design was inspired by the
			<a class="ulink" href="http://jcp.org/en/jsr/detail?id=173" target="_top">
			<span class="productname">Java</span>&trade; Streaming
			<abbr class="abbrev">API</abbr> for <abbr class="abbrev">XML</abbr>
			</a>. Thus it's fast and very flexible. Additionally, one main
			difference to any other implementation in this area is the fact,
			that the <abbr class="abbrev">SCS</abbr> data streams pretty soon are converted
			to <span class="productname">Unicode</span>&trade; and further processing
			is all done in unicode. Therefore it's worthwhile to use this
			library in multilingual environments.
		</p><div class="sect2" title="Example Text-Printer"><div class="titlepage"><div><div><h3 class="title"><a name="sect.exampletext"></a>Example Text-Printer</h3></div></div></div><div class="programlistingco"><pre class="programlisting">
import java.io.File;
import java.io.FileWriter;

import net.scs.reader.EndOfFileSignal;
import net.scs.reader.IPrinterMicroCommand;
import net.scs.reader.IScsDataProvider;
import net.scs.reader.ReaderConfig;
import net.scs.reader.SCSStreamReader;
import net.scs.reader.dataprovider.As400ScsDataProviderFactory;
import net.scs.reader.virtualprinter.PrinterConfig;
import net.scs.reader.virtualprinter.TextPrinter;

import com.ibm.as400.access.SpooledFile;

public class ExampleTextPrinter {

	public static void main(String[] args) throws Exception {
		SpooledFile spooledFile = null; // TODO: provide your spool file!
		final IScsDataProvider dp = As400ScsDataProviderFactory.getPrintObjectDataProvider(spooledFile);
		final ReaderConfig rcfg = new ReaderConfig.Builder()
				.collectPrintableChars(true)
				.ignoreUnknownControlCodes(false)
				.ignoreNulls(false)
				.getConfig();
		final SCSStreamReader reader = new SCSStreamReader(dp, rcfg);

		PrinterConfig pcfg = PrinterConfig.getDefault();
		TextPrinter printer = new TextPrinter(pcfg);

		try {
			while (reader.hasNext()) {
				final IPrinterMicroCommand event = reader.next();
				if (event == null) break;
				printer.runMicroCommand(event);
			}
		} catch (EndOfFileSignal e) {
			System.out.println("eof.");
		}

		printer.finish();

		FileWriter fw = new FileWriter(new File("test.txt"));
		printer.writeText(fw);
		fw.close();
	}
}
			</pre><div class="calloutlist"><table summary="Callout list" border="0"><tr><td align="left" valign="top" width="5%"><p><img border="0" alt="1" src="images/callouts/1.png"></p></td><td align="left" valign="top"><p>provide your spooled file here</p></td></tr><tr><td align="left" valign="top" width="5%"><p><img border="0" alt="2" src="images/callouts/2.png"></p></td><td align="left" valign="top"><p>provide your spooled file here</p></td></tr></table></div></div><p>
			</p></div><div class="sect2" title="Example PDF-Printer"><div class="titlepage"><div><div><h3 class="title"><a name="sect.examplepdf"></a>Example <abbr class="abbrev">PDF</abbr>-Printer</h3></div></div></div><div class="programlistingco"><pre class="programlisting">
import java.io.FileOutputStream;

import net.scs.reader.EndOfFileSignal;
import net.scs.reader.IPrinterMicroCommand;
import net.scs.reader.IScsDataProvider;
import net.scs.reader.ReaderConfig;
import net.scs.reader.SCSStreamReader;
import net.scs.reader.dataprovider.As400ScsDataProviderFactory;
import net.scs.reader.virtualprinter.PdfPrinter;
import net.scs.reader.virtualprinter.PrinterConfig;

import com.ibm.as400.access.SpooledFile;
import com.lowagie.text.Document;
import com.lowagie.text.Font;
import com.lowagie.text.FontFactory;
import com.lowagie.text.PageSize;
import com.lowagie.text.Rectangle;
import com.lowagie.text.pdf.BaseFont;
import com.lowagie.text.pdf.PdfWriter;

public class ExamplePdfPrinter {

	public static void main(String[] args) throws Exception {
		SpooledFile spooledFile = null; // TODO: provide your spool file!
		final IScsDataProvider dp = As400ScsDataProviderFactory.getPrintObjectDataProvider(spooledFile);
		final ReaderConfig rcfg = ReaderConfig.getDefault();
		final SCSStreamReader reader = new SCSStreamReader(dp, rcfg);

		PrinterConfig pcfg = PrinterConfig.getDefault();
		float FONT_SIZE = 9.0F;
		float leading = FONT_SIZE * 1.05F;
		
		// calculate font, font size, and margins for the PDF
		final Font monoSpacedFont = FontFactory.getFont(BaseFont.COURIER, FONT_SIZE);
		final Font monoSpacedFontBold = FontFactory.getFont(BaseFont.COURIER_BOLD, Font.BOLD);
		Rectangle pageSize = new Rectangle(PageSize.A4);
		final Document pdfdoc = new Document(pageSize);

		final FileOutputStream fos = new FileOutputStream("test.pdf");
		final PdfWriter pdfwriter = PdfWriter.getInstance(pdfdoc, fos);
		pdfdoc.open();
		
		PdfPrinter pdfprinter = new PdfPrinter(pcfg, pdfdoc, monoSpacedFont, monoSpacedFontBold, leading);
		
		try {
			while (reader.hasNext()) {
				final IPrinterMicroCommand event = reader.next();
				if (event == null) break;
				pdfprinter.runMicroCommand(event);
			}
		} catch (EndOfFileSignal e) {
			System.out.println("eof.");
		}
		
		pdfprinter.finish();
		pdfdoc.close();
		pdfwriter.close();
	}
}
			</pre><div class="calloutlist"><table summary="Callout list" border="0"><tr><td align="left" valign="top" width="5%"><p><img border="0" alt="1" src="images/callouts/1.png"></p></td><td align="left" valign="top"><p>provide your spooled file here</p></td></tr><tr><td align="left" valign="top" width="5%"><p><img border="0" alt="2" src="images/callouts/2.png"></p></td><td align="left" valign="top"><p>provide your spooled file here</p></td></tr></table></div></div><p>
			</p></div></div><div class="sect1" title="Development"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect.development"></a>Development</h2></div></div></div><div class="sect2" title="Project setup"><div class="titlepage"><div><div><h3 class="title"><a name="sect.projectsetup"></a>Project setup</h3></div></div></div><p>
			SCS Reader was developed using Eclipse IDE.
			Thus, the two plugins "net.scs.reader" and "unittest.net.scs.reader"
			are independent Eclipse projects.
		</p><div class="sect3" title="Requirements"><div class="titlepage"><div><div><h4 class="title"><a name="sect.requirements"></a>Requirements</h4></div></div></div><p>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Java v1.6+</p></li><li class="listitem"><p>GIT, recommended as Eclipse-Plugin and command line tool</p></li><li class="listitem"><p>Eclipse Helios (v3.6+)</p></li></ul></div><p>
			</p></div><div class="sect3" title="Dependencies"><div class="titlepage"><div><div><h4 class="title"><a name="sect.dependencies"></a>Dependencies</h4></div></div></div><p>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>JTOpen Framework v6.7+ (<a class="ulink" href="http://jt400.sourceforge.net/" target="_top">http://jt400.sourceforge.net/</a>)</p></li><li class="listitem"><p>iText v2.1.7 (<a class="ulink" href="http://itextpdf.com/" target="_top">http://itextpdf.com/</a>)</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>newer version 5.x is not yet supported</p></div></li></ul></div><p>
			</p></div><div class="sect3" title="Setup required libraries within Eclipse"><div class="titlepage"><div><div><h4 class="title"><a name="sect.eclipsesetup"></a>Setup required libraries within Eclipse</h4></div></div></div><p>
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>You have to download the required libraries</p></li><li class="listitem"><p>Create a new java project called <code class="filename">wrapper-req-libs</code></p></li><li class="listitem"><p>Create a new folder <code class="filename">lib</code> within project <code class="filename">wrapper-req-libs</code></p></li><li class="listitem"><p>Copy <code class="filename">iText.2.1.7.jar</code> and <code class="filename">jt400.jar</code> into the <code class="filename">lib</code> folder</p></li><li class="listitem"><p>Go to properties of the wrapper project, go to <span class="emphasis"><em>build path</em></span>
				                 and go to <span class="emphasis"><em>order and export</em></span></p></li><li class="listitem"><p>Check the two named libraries so that they get exported</p></li><li class="listitem"><p>Right-Click the wrapper project, click <span class="emphasis"><em>Configure</em></span>
				          and click <span class="emphasis"><em>Convert to Plug-in projects</em></span></p></li></ol></div><p>
			</p><p>Once you've converted the requiered <code class="filename">JARs</code>
			      into a plugin project, your workspace should be error free and
			      you should be able to start hacking on this project.
			</p></div></div></div></div></body></html>